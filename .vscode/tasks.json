/*
  Part of Kosmud

  Tasks definition for vs code.
*/

{
  "version": "2.0.0",
  "tasks":
  [
    {
      "label": "Remove Old Build",
      "presentation" : { "panel": "new" },
      "command": "node",
      "type": "process",
      "isBackground": false,
      "args": [ "./.vscode/RemoveOldBuild.js" ]
    },
    {
      "label": "Build Client",
      "presentation" : { "panel": "new" },
      "command": "node",
      "type": "process",
      "isBackground": true,
      "args":
      [
        "./node_modules/typescript/lib/tsc.js",
        // "--watch",
        "--project", "./Src/Client"
      ],
      "problemMatcher": [ "$tsc" ],
      "dependsOn": [ "Remove Old Build" ]
    },
    {
      "label": "Lint Client",
      "presentation" : { "panel": "new" },
      "command": "node",
      "type": "process",
      "isBackground": false,
      "args":
      [
        "./node_modules/tslint/bin/tslint",
        "--project", "./Src/Client/tsconfig.json",
        "--exclude", "**/Src/Shared/Box2D/**/*.*"
      ],
      "problemMatcher": [ "$tslint5" ],
      "dependsOn": [ "Build Client" ]
    },
    {
      // Run tsc again, this time in watch mode
      // (if we did it right away, tslint wouldn't run).
      "label": "Watch Client",
      "presentation" : { "panel": "new" },
      "command": "node",
      "type": "process",
      "isBackground": true,
      "args":
      [
        "./node_modules/typescript/lib/tsc.js",
        "--watch",
        "--project", "./Src/Client"
      ],
      "problemMatcher": [ "$tsc" ],
      "dependsOn": [ "Lint Client" ]
    },
    {
      "label": "Build Server",
      "presentation" : { "panel": "new" },
      "command": "node",
      "type": "process",
      "isBackground": true,
      "args":
      [
        "./node_modules/typescript/lib/tsc.js",
        // "--watch",
        "--project", "./Src/Server"
      ],
      "problemMatcher": [ "$tsc" ],
      "dependsOn": [ "Remove Old Build" ]
    },
    {
      "label": "Lint Server",
      "presentation" : { "panel": "new" },
      "command": "node",
      "type": "process",
      "isBackground": false,
      "args":
      [
        "./node_modules/tslint/bin/tslint",
        "--project", "./Src/Server/tsconfig.json",
        "--exclude", "**/Src/Shared/Box2D/**/*.*"
      ],
      "problemMatcher": [ "$tslint5" ],
      "dependsOn": [ "Build Server" ]
    },
    {
      // Run tsc again, this time in watch mode
      // (if we did it right away, tslint wouldn't run).
      "label": "Watch Server",
      // "presentation" : { "panel": "shared" },
      "presentation" : { "panel": "new" },
      "command": "node",
      "type": "process",
      "isBackground": true,
      "args":
      [
        "./node_modules/typescript/lib/tsc.js",
        "--watch",
        "--project", "./Src/Server"
      ],
      "problemMatcher": [ "$tsc" ],
      "dependsOn": [ "Lint Server" ]
    },
    {
      "label": "Build",
      "presentation" : { "panel": "new" },
      "dependsOn": [ "Watch Client", "Watch Server" ],
      "group":
      {
        "kind": "build",
        "isDefault": true
      }
    }
  ]
}